!function(h,t,e,n){"use strict";function i(e,t){return this.$element=h(e),this.elementId=e.id,this.styleId=this.elementId+"-style",this.init(t),{options:this.options,init:h.proxy(this.init,this),remove:h.proxy(this.remove,this),getNode:h.proxy(this.getNode,this),getParent:h.proxy(this.getParent,this),getSiblings:h.proxy(this.getSiblings,this),getSelected:h.proxy(this.getSelected,this),getUnselected:h.proxy(this.getUnselected,this),getExpanded:h.proxy(this.getExpanded,this),getCollapsed:h.proxy(this.getCollapsed,this),getChecked:h.proxy(this.getChecked,this),getUnchecked:h.proxy(this.getUnchecked,this),getDisabled:h.proxy(this.getDisabled,this),getEnabled:h.proxy(this.getEnabled,this),selectNode:h.proxy(this.selectNode,this),unselectNode:h.proxy(this.unselectNode,this),toggleNodeSelected:h.proxy(this.toggleNodeSelected,this),collapseAll:h.proxy(this.collapseAll,this),collapseNode:h.proxy(this.collapseNode,this),expandAll:h.proxy(this.expandAll,this),expandNode:h.proxy(this.expandNode,this),toggleNodeExpanded:h.proxy(this.toggleNodeExpanded,this),revealNode:h.proxy(this.revealNode,this),checkAll:h.proxy(this.checkAll,this),checkNode:h.proxy(this.checkNode,this),uncheckAll:h.proxy(this.uncheckAll,this),uncheckNode:h.proxy(this.uncheckNode,this),toggleNodeChecked:h.proxy(this.toggleNodeChecked,this),disableAll:h.proxy(this.disableAll,this),disableNode:h.proxy(this.disableNode,this),enableAll:h.proxy(this.enableAll,this),enableNode:h.proxy(this.enableNode,this),toggleNodeDisabled:h.proxy(this.toggleNodeDisabled,this),search:h.proxy(this.search,this),clearSearch:h.proxy(this.clearSearch,this)}}function d(e){t.console&&t.console.error(e)}let r="treeview",l={};l.settings={injectStyle:!0,levels:2,expandIcon:"fa fa-chevron-right",collapseIcon:"fa fa-chevron-down",emptyIcon:"fa",nodeIcon:"",selectedIcon:"",checkedIcon:"fa fa-check-circle-o",uncheckedIcon:"fa fa-circle-thin",color:n,backColor:n,borderColor:n,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:n,enableLinks:!1,enableIndent:!0,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:n,onNodeCollapsed:n,onNodeDisabled:n,onNodeEnabled:n,onNodeExpanded:n,onNodeSelected:n,onNodeUnchecked:n,onNodeUnselected:n,onSearchComplete:n,onSearchCleared:n},l.options={silent:!1,ignoreChildren:!1},l.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0},i.prototype.init=function(e){this.tree=[],this.nodes=[],e.data&&("string"==typeof e.data&&(e.data=h.parseJSON(e.data)),this.tree=h.extend(!0,[],e.data),delete e.data),this.options=h.extend({},l.settings,e),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},i.prototype.remove=function(){this.destroy(),h.removeData(this,r),h("#"+this.styleId).remove()},i.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},i.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},i.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",h.proxy(this.clickHandler,this)),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},i.prototype.setInitialStates=function(e,n){if(e.nodes){n+=1;let o=e,s=this;h.each(e.nodes,function(e,t){t.nodeId=s.nodes.length,t.parentId=o.nodeId,t.hasOwnProperty("selectable")||(t.selectable=!1),t.state=t.state||{},t.state.hasOwnProperty("checked")||(t.state.checked=!1),t.state.hasOwnProperty("disabled")||(t.state.disabled=!1),t.state.hasOwnProperty("expanded")||(!t.state.disabled&&n<s.options.levels&&t.nodes&&0<t.nodes.length?t.state.expanded=!0:t.state.expanded=!1),t.state.hasOwnProperty("selected")||(t.state.selected=!1),s.nodes.push(t),t.nodes&&s.setInitialStates(t,n)})}},i.prototype.clickHandler=function(t){this.options.enableLinks||t.preventDefault();let o=h(t.target);t=this.findNode(o);if(t&&!t.state.disabled){let e=o.attr("class")?o.attr("class").split(" "):[];-1!==e.indexOf("expand-icon")?this.toggleExpandedState(t,l.options):-1!==e.indexOf("check-icon")?this.toggleCheckedState(t,l.options):t.selectable?this.toggleSelectedState(t,l.options):this.toggleExpandedState(t,l.options),this.render()}},i.prototype.findNode=function(e){e=e.closest("li.list-group-item").attr("data-nodeid"),e=this.nodes[e];return e||console.log("Error: node does not exist"),e},i.prototype.toggleExpandedState=function(e,t){e&&this.setExpandedState(e,!e.state.expanded,t)},i.prototype.setExpandedState=function(e,t,o){t!==e.state.expanded&&(t&&e.nodes?(e.state.expanded=!0,o.silent||this.$element.trigger("nodeExpanded",h.extend(!0,{},e))):t||(e.state.expanded=!1,o.silent||this.$element.trigger("nodeCollapsed",h.extend(!0,{},e)),e.nodes&&!o.ignoreChildren&&h.each(e.nodes,h.proxy(function(e,t){this.setExpandedState(t,!1,o)},this))))},i.prototype.toggleSelectedState=function(e,t){e&&this.setSelectedState(e,!e.state.selected,t)},i.prototype.setSelectedState=function(e,t,o){t!==e.state.selected&&(t?(this.options.multiSelect||h.each(this.findNodes("true","g","state.selected"),h.proxy(function(e,t){this.setSelectedState(t,!1,o)},this)),e.state.selected=!0,o.silent||this.$element.trigger("nodeSelected",h.extend(!0,{},e))):(e.state.selected=!1,o.silent||this.$element.trigger("nodeUnselected",h.extend(!0,{},e))))},i.prototype.toggleCheckedState=function(e,t){e&&this.setCheckedState(e,!e.state.checked,t)},i.prototype.setCheckedState=function(e,t,o){t!==e.state.checked&&(t?(e.state.checked=!0,o.silent||this.$element.trigger("nodeChecked",h.extend(!0,{},e))):(e.state.checked=!1,o.silent||this.$element.trigger("nodeUnchecked",h.extend(!0,{},e))))},i.prototype.setDisabledState=function(e,t,o){t!==e.state.disabled&&(t?(e.state.disabled=!0,this.setExpandedState(e,!1,o),this.setSelectedState(e,!1,o),this.setCheckedState(e,!1,o),o.silent||this.$element.trigger("nodeDisabled",h.extend(!0,{},e))):(e.state.disabled=!1,o.silent||this.$element.trigger("nodeEnabled",h.extend(!0,{},e))))},i.prototype.render=function(){this.initialized||(this.$element.addClass(r),this.$wrapper=h(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0)},i.prototype.buildTree=function(e,r){if(e){r+=1;let d=this;h.each(e,function(e,t){let o=h(d.template.itemWrapper).addClass("node-"+d.elementId).addClass(t.state.checked?"node-checked":"").addClass(t.state.disabled?"node-disabled":"").addClass(t.state.selected?"node-selected":"").addClass(t.searchResult?"search-result":"").attr("data-nodeid",t.nodeId).attr("style",d.buildStyleOverride(t)),s=h(d.template.itemLeftElem),n=h(d.template.itemRightElem);if(o.append(s),o.append(n),d.options.enableIndent)for(let e=0;e<r-1;e++)s.append(d.template.indent);let i=[];if(t.nodes?(i.push("expand-icon"),t.state.expanded?i.push(d.options.collapseIcon):i.push(d.options.expandIcon)):i.push(d.options.emptyIcon),s.append(h(d.template.icon).addClass(i.join(" "))),d.options.showIcon){let e=["node-icon"];e.push(t.icon||d.options.nodeIcon),t.state.selected&&(e.pop(),e.push(t.selectedIcon||d.options.selectedIcon||t.icon||d.options.nodeIcon)),s.append(h(d.template.icon).addClass(e.join(" ")))}if(d.options.showCheckbox){let e=["check-icon"];t.state.checked?e.push(d.options.checkedIcon):e.push(d.options.uncheckedIcon),s.append(h(d.template.icon).addClass(e.join(" ")))}if(d.options.enableLinks?s.append(h(d.template.link).attr("href",t.href).append(t.text)):s.append(t.text),d.options.showTags&&t.tags&&h.each(t.tags,function(e,t){n.append(h(d.template.badge).append(t))}),d.$wrapper.append(o),t.nodes&&t.state.expanded&&!t.state.disabled)return d.buildTree(t.nodes,r)})}},i.prototype.buildStyleOverride=function(e){if(e.state.disabled)return"";let t=e.color,o=e.backColor;return this.options.highlightSelected&&e.state.selected&&(this.options.selectedColor&&(t=this.options.selectedColor),this.options.selectedBackColor&&(o=this.options.selectedBackColor)),this.options.highlightSearchResults&&e.searchResult&&!e.state.disabled&&(this.options.searchResultColor&&(t=this.options.searchResultColor),this.options.searchResultBackColor&&(o=this.options.searchResultBackColor)),"color:"+t+";background-color:"+o+";"},i.prototype.injectStyle=function(){this.options.injectStyle&&!e.getElementById(this.styleId)&&h('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},i.prototype.buildStyle=function(){let e=".node-"+this.elementId+"{";return this.options.color&&(e+="color:"+this.options.color+";"),this.options.backColor&&(e+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(e+="border:1px solid "+this.options.borderColor+";"):e+="border:none;",e+="}",this.options.onhoverColor&&(e+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+e},i.prototype.template={list:'<ul class="list-group list-group-flush pane"></ul>',itemWrapper:'<li class="list-group-item d-flex justify-content-between align-items-start"></li>',itemLeftElem:'<div class="w-100"></div>',itemRightElem:"<div></div>",indent:'<span class="mx-2"></span>',icon:'<span class="icon"></span>',link:'<a class="w-75" href="#" style="display:inline-block; color:inherit; text-decoration:none;"></a>',badge:'<span class="ms-1 badge bg-primary rounded-pill"></span>'},i.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",i.prototype.getNode=function(e){return this.nodes[e]},i.prototype.getParent=function(e){e=this.identifyNode(e);return this.nodes[e.parentId]},i.prototype.getSiblings=function(e){let t=this.identifyNode(e);e=this.getParent(t);let o=e?e.nodes:this.tree;return o.filter(function(e){return e.nodeId!==t.nodeId})},i.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},i.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},i.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},i.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},i.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},i.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},i.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},i.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},i.prototype.selectNode=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.setSelectedState(e,!0,t)},this)),this.render()},i.prototype.unselectNode=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.setSelectedState(e,!1,t)},this)),this.render()},i.prototype.toggleNodeSelected=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.toggleSelectedState(e,t)},this)),this.render()},i.prototype.collapseAll=function(e){var t=this.findNodes("true","g","state.expanded");this.forEachIdentifier(t,e,h.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},i.prototype.collapseNode=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},i.prototype.expandAll=function(e){var t;(e=h.extend({},l.options,e))&&e.levels?this.expandLevels(this.tree,e.levels,e):(t=this.findNodes("false","g","state.expanded"),this.forEachIdentifier(t,e,h.proxy(function(e,t){this.setExpandedState(e,!0,t)},this))),this.render()},i.prototype.expandNode=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.setExpandedState(e,!0,t),e.nodes&&t&&t.levels&&this.expandLevels(e.nodes,t.levels-1,t)},this)),this.render()},i.prototype.expandLevels=function(e,o,s){s=h.extend({},l.options,s),h.each(e,h.proxy(function(e,t){this.setExpandedState(t,0<o,s),t.nodes&&this.expandLevels(t.nodes,o-1,s)},this))},i.prototype.revealNode=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){let o=this.getParent(e);for(;o;)this.setExpandedState(o,!0,t),o=this.getParent(o)},this)),this.render()},i.prototype.toggleNodeExpanded=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.toggleExpandedState(e,t)},this)),this.render()},i.prototype.checkAll=function(e){var t=this.findNodes("false","g","state.checked");this.forEachIdentifier(t,e,h.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},i.prototype.checkNode=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},i.prototype.uncheckAll=function(e){var t=this.findNodes("true","g","state.checked");this.forEachIdentifier(t,e,h.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},i.prototype.uncheckNode=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},i.prototype.toggleNodeChecked=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.toggleCheckedState(e,t)},this)),this.render()},i.prototype.disableAll=function(e){var t=this.findNodes("false","g","state.disabled");this.forEachIdentifier(t,e,h.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},i.prototype.disableNode=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},i.prototype.enableAll=function(e){var t=this.findNodes("true","g","state.disabled");this.forEachIdentifier(t,e,h.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},i.prototype.enableNode=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},i.prototype.toggleNodeDisabled=function(e,t){this.forEachIdentifier(e,t,h.proxy(function(e,t){this.setDisabledState(e,!e.state.disabled,t)},this)),this.render()},i.prototype.forEachIdentifier=function(e,o,s){o=h.extend({},l.options,o),e instanceof Array||(e=[e]),h.each(e,h.proxy(function(e,t){s(this.identifyNode(t),o)},this))},i.prototype.identifyNode=function(e){return"number"==typeof e?this.nodes[e]:e},i.prototype.search=function(t,o){o=h.extend({},l.searchOptions,o),this.clearSearch({render:!1});let s=[];if(t&&0<t.length){o.exactMatch&&(t="^"+t+"$");let e="g";o.ignoreCase&&(e+="i"),s=this.findNodes(t,e),h.each(s,function(e,t){t.searchResult=!0})}return o.revealResults?this.revealNode(s):this.render(),this.$element.trigger("searchComplete",h.extend(!0,{},s)),s},i.prototype.clearSearch=function(e){e=h.extend({},{render:!0},e);var t=h.each(this.findNodes("true","g","searchResult"),function(e,t){t.searchResult=!1});e.render&&this.render(),this.$element.trigger("searchCleared",h.extend(!0,{},t))},i.prototype.findNodes=function(o,s,n){s=s||"g",n=n||"text";let i=this;return h.grep(this.nodes,function(e){let t=i.getNodeValue(e,n);if("string"==typeof t)return t.match(new RegExp(o,s))})},i.prototype.getNodeValue=function(e,t){var o,s=t.indexOf(".");return 0<s?(o=e[t.substring(0,s)],s=t.substring(s+1,t.length),this.getNodeValue(o,s)):e.hasOwnProperty(t)?e[t].toString():n};h.fn[r]=function(t,o){let s;return this.each(function(){let e=h.data(this,r);"string"==typeof t?e?h.isFunction(e[t])&&"_"!==t.charAt(0)?(o instanceof Array||(o=[o]),s=e[t].apply(e,o)):d("No such method : "+t):d("Not initialized, can not call method : "+t):"boolean"==typeof t?s=e:h.data(this,r,new i(this,h.extend(!0,{},t)))}),s||this}}(jQuery,window,document);